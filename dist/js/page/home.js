"use strict";var ban_text="text!../../views/ban_mod.html",hot_text="text!../../views/hot_mod.html",large_text="text!../../views/lar_mod.html",gril_text="text!../../views/grils_mod.html",boy_text="text!../../views/boys_mod.html",free_text="text!../../views/free_mod.html",pro_text="text!../../views/project_mod.html",case_text="text!../../views/bookCase.html";define(["jquery","bscroll","template","swiper","format",ban_text,hot_text,large_text,gril_text,boy_text,free_text,pro_text],function(x,d,h,u,_,b,f,p,g,v,w,y){x.ajax({url:"/book/home",dataType:"json",success:function(t){var e=_(t.items[2]),o=_(t.items[3]),l=_(t.items[4]),s=new d(".bookcity",{scrollbar:!0,probeType:2,click:!0}),a=(new d(".bookcase",{scrollbar:!0,probeType:2,click:!0}),[b,f,p,g,v,w,y]),i=[t.items[0],t.items[1],e,o,l,t.items[5],t.items[6]];h(a,i,[".ban",".week_hot",".large",".grils",".boys",".free",".project"]);new u(".ban",{loop:!0,autoplay:{delay:2e3}});var n="释放加载更多...",r="上拉加载更多...",c=1,m=new u(".main",{on:{slideChangeTransitionStart:function(){var t=this.activeIndex;x(".header>ul>li").eq(t).addClass("active").siblings().removeClass("active")}}});x(".header>ul>li").on("click",function(){m.slideTo(x(this).index())}),s.on("scroll",function(){if(3<=c)return x(".con_scroll").attr("data-up","暂无数据更新"),!1;this.y<this.maxScrollY-40?x(".con_scroll").attr("data-up",n):this.y<this.maxScrollY-20&&x(".con_scroll").attr("data-up",r)}),s.on("scrollEnd",function(){x(".con_scroll").attr("data-up",r),s.refresh()}),s.on("touchEnd",function(){if(x(".con_scroll").attr("data-up")===n){if(4<c)return x(".con_scroll").attr("data-up","暂无数据更新"),!1;x.ajax({url:"/book/list?num="+c+"&limit=10",dataType:"json",success:function(t){h(v,t,".moreCon",!0)}}),c++}}),h(v,l,".caseBox"),x(".control").on("click",function(){x(this).toggleClass("control"),x(this).toggleClass("show"),x(".caseBox dl").toggleClass("conList"),x(".caseBox dl").toggleClass("conTab")})}}),x(".login").click(function(){location.href="../../page/login.html"})});