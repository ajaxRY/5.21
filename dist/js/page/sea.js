"use strict";var ran=function(t,a){return Math.floor(Math.random()*(a-t+1)+t)};define(["jquery","template","text!../../views/search_mod.html"],function(n,r,i){var c,o=window.localStorage,a=JSON.parse(o.getItem("user"))||[];n.ajax({url:"/book/searchkey",dataType:"json",success:function(t){c=t.ads.concat(a),r(n(".search_tags").html(),t,".sear_tags")}}),r(n(".search_tags").html(),c,".sear_tags"),n(".add").on("click",function(){var e=!0,s=n.trim(n(this).prev().val());n.ajax({url:"/book/search",data:{tit:s},type:"post",dataType:"json",success:function(t){c.map(function(t){new RegExp(s,"g").test(t.ad_name)&&(e=!1)}),e&&(c.push({ad_name:s}),o.setItem("user",JSON.stringify(c)));var a=t.items.filter(function(t,a){return new RegExp(s,"g").test(t.title)});a.length?r(i,{items:a},".main"):n(".main").html('<p class="tip">暂无该类数据...</p>')}})})});